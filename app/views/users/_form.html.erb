<div class="panel panel-primary">
<div class="panel-heading">Add new user</div>
<div class="panel-body">
<div class="row">
<div class="col-md-6 col-md-offset-3">
<% if @user.errors.any? %>
    <div class="alert alert-danger">
      <b><%= pluralize(@user.errors.count, "Error") %> prohibited this user from being saved:</b>
      <ul>
      <% @user.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
<% end %>
<%
if @user.id 
  url = user_path(@user.id)
  method = 'put'
else
  url = users_path
  method = 'post'
end
%>
<%= form_for(@user, url: url, method: method, :html => {class: "form-horizontal"}) do |f| %>
  <div class="form-group">
    <%= f.label :username, class: "col-sm-4 control-label" %>
    <div class="col-sm-8">
      <%= f.text_field :username, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :firstname, class: "col-sm-4 control-label" %>
    <div class="col-sm-8">
      <%= f.text_field :firstname, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :lastname, class: "col-sm-4 control-label" %>
    <div class="col-sm-8">
      <%= f.text_field :lastname, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :email, class: "col-sm-4 control-label" %>
    <div class="col-sm-8">
      <%= f.text_field :email, class: "form-control" %>
    </div>
  </div>
  <% if @user.id.nil? %>
  <div class="form-group">
    <%= f.label :password, class: "col-sm-4 control-label" %>
    <div class="col-sm-8">
      <%= f.password_field :password, class: "form-control" %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :confirm_password, class: "col-sm-4 control-label" %>
    <div class="col-sm-8">
      <%= f.password_field :confirm_password, class: "form-control" %>
    </div>
  </div>
  <% end %>
  <div class="form-group">
    <div class="col-sm-offset-4 col-sm-8">
      <% if @user.id %>
      <%= f.submit 'Update', :class => "btn btn-primary" %>
      <% else %>
      <%= f.submit 'Create', :class => "btn btn-primary" %>
      <% end %>
      
      <%= link_to 'Back', users_path, class: "btn btn-default" %>
    </div>
  </div>
<% end %>
</div>
</div>
</div>
</div>